2 smart_ptr有哪些坑可以仍然导致内存泄漏？

 2.1.shared_ptr初始化构造函数指针，一般是可以动态管理的内存地址，如果不是就可能导致内存泄漏；

 2.2.shared_ptr要求内部new和delete实现必须是成对，一致性，如果不是就可能导致内存泄漏；

 2.3. shared_ptr对象和其他大多数STL容器一样，本身不是线程安全的，需要用户去保证；

3 unique_ptr有哪些限制？

只能移动赋值转移数据，不能拷贝；

不支持类型转换（cast）；

4 智能指针是异常安全的吗？

 

所谓异常安全是指,当异常抛出时，带有异常安全的函数会:

    不泄露任何资源

    不允许数据被破坏

智能指针是线程安全的吗？



智能指针对象的引用计数模块是线程安全的，因为 shared_ptr 有两个数据成员，读写操作不能原子化，所以对象本身不是线程安全的，需要用户去保证线程安全。
